# Anomaly Detection Agent

The **Anomaly Detection Agent** is the system's "Security Guard." It monitors both external market conditions and internal system behavior to detect "weird" situations that might be dangerous.

## Primary Responsibilities
1. **Flash Crash Detection**: Monitors for extreme, near-instant price drops or spikes.
2. **System Spam Prevention**: Detects if strategies are firing signals too rapidly (which might indicate a software bug or a "market feedback loop").

## Internal Logic (Human Terms)

### 1. The Volatility Watch (Flash Crashes)
The agent watches every piece of `MARKET_DATA`. If it sees the price move by more than **5% in a single candle**, it flags this as an anomaly. Such moves often lead to bad execution (high slippage) or are signs of market manipulation.

### 2. The Circuit Breaker (Signal Spam)
It tracks how many `SIGNAL` events are generated by the Aggregator. If the system produces more than **10 signals in 60 seconds**, the agent detects an "Excessive Signal Frequency" anomaly. This prevents a buggy strategy from draining the account with hundreds of small, bad trades in a few seconds.

### 3. Alerting
When an anomaly is detected, it publishes an `ANOMALY_ALERT`. Other agents (like the Audit Log) record this, and in more advanced configurations, this can trigger a system-wide halt.

## Key Events
| Event | Direction | Description |
| :--- | :--- | :--- |
| `MARKET_DATA` | **Input** | Monitors price for extreme swings. |
| `SIGNAL` | **Input** | Monitors frequency of trade ideas. |
| `ANOMALY_ALERT` | **Output** | Published when thresholds are breached. |


# Prompt

